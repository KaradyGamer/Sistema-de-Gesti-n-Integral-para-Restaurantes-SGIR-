{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>AdminUX - SGIR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link rel="stylesheet" href="{% static 'css/adminux/main.css' %}" />
</head>
<body class="dark-theme">
  <!-- Loader -->
  <div id="loader" class="loader-overlay">
    <!-- From Uiverse.io by JaydipPrajapati1910 -->
    <div class="loader"></div>
  </div>

  <div class="app-layout">
    <!-- ========== SIDEBAR ========== -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">
          <div class="logo-dot"></div>
          <div class="logo-text">
            <span class="logo-title">Karady</span>
            <span class="logo-subtitle">ADMIN</span>
          </div>
        </div>
      </div>

      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-target="dashboard">
          <span class="nav-icon">
            <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
              <path fill="#7D8590"
                d="M3 3h8v8H3V3zm0 10h8v8H3v-8zm10-10h8v8h-8V3zm0 10h8v8h-8v-8z" />
            </svg>
          </span>
          <span class="nav-text">Inicio</span>
        </a>

        <a href="#" class="nav-item" data-target="mesas">
          <span class="nav-icon">
            <svg viewBox="0 0 24 24" width="18" height="18">
              <path fill="#7D8590"
                d="M4 6h16v2H4V6zm0 5h16v2H4v-2zm0 5h16v2H4v-2z" />
            </svg>
          </span>
          <span class="nav-text">Mesas</span>
          <span class="nav-counter hidden" data-nav-badge="mesas">0</span>
        </a>

        <a href="#" class="nav-item" data-target="productos">
          <span class="nav-icon">
            <svg viewBox="0 0 24 24" width="18" height="18">
              <path fill="#7D8590"
                d="M4 7l8-4 8 4-8 4-8-4zm0 3l8 4 8-4v7l-8 4-8-4V10z" />
            </svg>
          </span>
          <span class="nav-text">Productos</span>
          <span class="nav-counter hidden" data-nav-badge="productos">0</span>
        </a>

        <a href="#" class="nav-item" data-target="inventario">
          <span class="nav-icon">
            <svg viewBox="0 0 24 24" width="18" height="18">
              <path fill="#7D8590"
                d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z" />
            </svg>
          </span>
          <span class="nav-text">Inventario</span>
          <span class="nav-counter hidden" data-nav-badge="inventario">0</span>
        </a>

        <a href="#" class="nav-item" data-target="reservas">
          <span class="nav-icon">
            <svg viewBox="0 0 24 24" width="18" height="18">
              <path fill="#7D8590"
                d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zm0-12H5V5h14v2zM7 11h5v5H7z" />
            </svg>
          </span>
          <span class="nav-text">Reservas</span>
          <span class="nav-counter hidden" data-nav-badge="reservas">0</span>
        </a>

        <a href="#" class="nav-item" data-target="usuarios">
          <span class="nav-icon">
            <svg viewBox="0 0 24 24" width="18" height="18">
              <path fill="#7D8590"
                d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4zm0 2c-3.31 0-7 1.67-7 4v2h14v-2c0-2.33-3.69-4-7-4z" />
            </svg>
          </span>
          <span class="nav-text">Usuarios</span>
        </a>

        <a href="#" class="nav-item" data-target="reportes">
          <span class="nav-icon">
            <svg viewBox="0 0 24 24" width="18" height="18">
              <path fill="#7D8590"
                d="M4 20V10h3v10H4zm7 0V4h3v16h-3zm7 0v-7h3v7h-3z" />
            </svg>
          </span>
          <span class="nav-text">Reportes</span>
        </a>

        <a href="#" class="nav-item" data-target="configuracion">
          <span class="nav-icon">
            <svg viewBox="0 0 24 24" width="18" height="18">
              <path fill="#7D8590"
                d="M19.4 13a7.43 7.43 0 0 0 .1-1 7.43 7.43 0 0 0-.1-1l2.1-1.64-2-3.46-2.49.76a7.28 7.28 0 0 0-1.73-1L15 2h-6l-.38 2.66a7.28 7.28 0 0 0-1.73 1l-2.49-.76-2 3.46L4.5 11a7.43 7.43 0 0 0-.1 1 7.43 7.43 0 0 0 .1 1L2.4 14.64l2 3.46 2.49-.76a7.28 7.28 0 0 0 1.73 1L9 22h6l.38-2.66a7.28 7.28 0 0 0 1.73-1l2.49.76 2-3.46L19.4 13zM12 15a3 3 0 1 1 3-3 3 3 0 0 1-3 3z" />
            </svg>
          </span>
          <span class="nav-text">Configuraci√≥n</span>
        </a>
      </nav>

      <div class="sidebar-footer">
        <div class="user-card">
          <div class="user-avatar">K</div>
          <div class="user-info">
            <div class="user-name">Karady</div>
            <div class="user-role">Administrador</div>
          </div>
        </div>
        <button id="logoutBtn" class="logout-btn">
          <span class="logout-icon">‚èª</span>
          <span class="logout-text">Cerrar sesi√≥n</span>
        </button>
      </div>
    </aside>

    <!-- ========== MAIN ========== -->
    <main class="main-area">
      <header class="topbar">
        <div class="topbar-left">
          <!-- Burger Uiverse -->
          <label class="burger" for="burgerToggle">
            <input type="checkbox" id="burgerToggle" />
            <span></span>
            <span></span>
            <span></span>
          </label>

          <span class="topbar-title">Men√∫</span>
        </div>

        <div class="topbar-right">
          <span class="topbar-env">Karady Admin ¬∑ Restaurante</span>
        </div>
      </header>

      <!-- üîî NOTIFICACIONES GLOBALES -->
      <div class="notif-wrapper">
        <button
          id="notifBell"
          class="notif-bell"
          type="button"
          aria-label="Notificaciones"
        >
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path
              fill="currentColor"
              d="M12 2a5 5 0 00-5 5v2.09c0 .47-.17.93-.48 1.29L5.1 12.9A1.5 1.5 0 006.27 15H17.7a1.5 1.5 0 001.17-2.1l-1.42-2.52a2 2 0 01-.25-.97V7a5 5 0 00-5-5zm0 20a2.5 2.5 0 002.45-2h-4.9A2.5 2.5 0 0012 22z"
            />
          </svg>
          <span id="notifBadge" class="notif-badge hidden">0</span>
        </button>

        <div id="notifDropdown" class="notif-dropdown hidden">
          <div class="notif-header">
            <span class="notif-title">Notificaciones</span>
            <button
              id="notifClear"
              type="button"
              class="notif-clear"
            >
              Limpiar
            </button>
          </div>

          <ul id="notifList" class="notif-list">
            <!-- Se llena por JS -->
          </ul>
        </div>
      </div>

      <section class="content">
        <!-- ===== DASHBOARD ===== -->
        <section class="page-section active" data-section="dashboard">
          <!-- RELOJ -->
          <div class="hero">
            <div class="hero-clock">
              <div id="clockTime" class="clock-time">00 : 00 : 00</div>
              <div id="clockDate" class="clock-date">Cargando fecha...</div>
            </div>
            <div class="hero-controls">
              <div class="radio-container" id="periodoControl">
                <button class="radio-pill active" data-periodo="hoy">Hoy</button>
                <button class="radio-pill" data-periodo="semana">Semana</button>
                <button class="radio-pill" data-periodo="mes">Mes</button>
              </div>
            </div>
          </div>

          <!-- GR√ÅFICA + RESTO -->
          <div class="dashboard-grid">
            <!-- VENTAS -->
            <article class="card card--ventas">
              <div class="card-header-row">
                <div>
                  <h3>Ventas</h3>
                  <p id="ventasSubtitle" class="card-subtitle">
                    Rendimiento por hora (hoy).
                  </p>
                </div>
                <div class="card-header-right">
                  <span class="chip chip-green" id="ventasPeriodoLabel">Hoy</span>
                  <button id="estadoCajaBtn" class="estado-caja estado-caja--offline">
                    Caja cerrada
                  </button>
                </div>
              </div>
              <div class="card-chart-wrapper">
                <canvas id="ventasChart"></canvas>
              </div>
            </article>

            <!-- RESERVAS -->
            <article class="card card--reservas">
              <div class="card-header-row">
                <div>
                  <h3>Reservas</h3>
                  <p class="card-subtitle">Reservas recientes registradas.</p>
                </div>
              </div>
              <ul class="reservas-list" id="reservasList"></ul>
            </article>

            <!-- ACTIVIDADES -->
            <article class="card card--actividades">
              <div class="card-header-row">
                <div>
                  <h3>Actividades del sistema</h3>
                  <p class="card-subtitle">
                    Inicio de sesi√≥n, caja, comandas, reservas‚Ä¶
                  </p>
                </div>
              </div>
              <ul class="activity-list" id="activityList"></ul>
            </article>

            <!-- TOP PRODUCTOS -->
            <article class="card card--topproductos">
              <div class="card-header-row">
                <div>
                  <h3>Top productos</h3>
                  <p class="card-subtitle">
                    Top 5 de productos m√°s vendidos.
                  </p>
                </div>
              </div>
              <ol class="topproductos-list" id="topProductosList"></ol>
            </article>
          </div>
        </section>

        <!-- ===== MESAS ===== -->
        <section class="page-section" data-section="mesas">
          <header class="page-header">
            <div>
              <h2>Mesas</h2>
              <p>Gestiona las mesas por zona, estado, capacidad y mapa.</p>
            </div>
          </header>

          <!-- Filtros -->
          <section class="card card--filters">
            <div class="filters-row">
              <div class="field-group">
                <label for="filtroBusquedaMesa">Buscar mesa</label>
                <input
                  type="text"
                  id="filtroBusquedaMesa"
                  placeholder="Ej: Mesa 5, Terraza..."
                />
              </div>

              <div class="field-group">
                <label for="filtroEstadoMesa">Estado</label>
                <select id="filtroEstadoMesa">
                  <option value="todos">Todos</option>
                  <option value="Libre">Libre</option>
                  <option value="Ocupada">Ocupada</option>
                  <option value="Reservada">Reservada</option>
                </select>
              </div>

              <div class="filters-actions">
                <button id="btnMostrarFormMesa" class="btn btn--primary">
                  + A√±adir mesa
                </button>
              </div>
            </div>
          </section>

          <!-- Formulario Mesa -->
          <section id="mesaFormSection" class="card card--form hidden">
            <div class="card-header-row">
              <h3 id="mesaFormTitulo">Nueva mesa</h3>
            </div>
            <form id="mesaForm" class="mesa-form">
              <div class="mesa-form-grid">
                <div class="field-group">
                  <label for="mesaNumero">N√∫mero / Nombre</label>
                  <input
                    type="text"
                    id="mesaNumero"
                    required
                    placeholder="Ej: Mesa 5, VIP 1..."
                  />
                </div>

                <div class="field-group">
                  <label for="mesaZona">Zona</label>
                  <select id="mesaZona"></select>
                </div>

                <div class="field-group">
                  <label for="mesaEstado">Estado</label>
                  <select id="mesaEstado">
                    <option value="Libre">Libre</option>
                    <option value="Ocupada">Ocupada</option>
                    <option value="Reservada">Reservada</option>
                  </select>
                </div>

                <div class="field-group">
                  <label for="mesaCapacidad">Capacidad</label>
                  <input
                    type="number"
                    id="mesaCapacidad"
                    min="1"
                    value="2"
                    required
                  />
                </div>
              </div>

              <div class="mesa-form-actions">
                <button type="button" id="mesaCancelar" class="btn btn--ghost">
                  Cancelar
                </button>
                <button type="submit" id="mesaGuardar" class="btn btn--primary">
                  Guardar mesa
                </button>
              </div>
            </form>
          </section>

          <!-- Tabla + Mapa -->
          <section class="layout-mesas-grid">
            <article class="card card--table">
              <div class="card-header-row">
                <h3>Listado de mesas</h3>
              </div>
              <div class="table-wrapper">
                <table class="table">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Mesa</th>
                      <th>Zona</th>
                      <th>Estado</th>
                      <th>Cap.</th>
                      <th>Comb.</th>
                      <th>Activa</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody id="mesasTableBody"></tbody>
                </table>
              </div>
            </article>

            <article class="card card--mapa">
              <div class="card-header-row">
                <div>
                  <h3>Mapa de mesas</h3>
                  <p class="card-subtitle">
                    Arrastra las mesas para cambiarlas de posici√≥n.
                  </p>
                </div>
                <div class="mapa-controls">
                  <select id="mapaZonaSelect"></select>
                  <button id="btnSeleccionarMesas" class="btn btn--ghost">
                    Seleccionar mesas
                  </button>
                  <button id="btnCombinarSeleccionadas" class="btn btn--primary" style="display:none;">
                    Combinar seleccionadas
                  </button>
                  <button id="btnSepararGrupo" class="btn btn--ghost">
                    Separar grupo
                  </button>
                  <button id="btnNuevaZona" class="btn btn--ghost">
                    + Nueva zona
                  </button>
                </div>
              </div>

              <div class="mapa-legend">
                <span class="legend-pill legend-lib">
                  <span class="legend-color"></span> Libre
                </span>
                <span class="legend-pill legend-occ">
                  <span class="legend-color"></span> Ocupada
                </span>
                <span class="legend-pill legend-res">
                  <span class="legend-color"></span> Reservada
                </span>
              </div>

              <div id="mapaMesasGrid" class="mapa-grid"></div>
            </article>
          </section>
        </section>

        <!-- ===== PRODUCTOS ===== -->
        <section class="page-section" data-section="productos">
          <header class="page-header">
            <div>
              <h2>Productos</h2>
              <p>Gestiona productos, categor√≠as, precios, estado e inventario.</p>
            </div>
            <div class="mapa-controls">
              <button id="btnGestionCategorias" class="btn btn--ghost">
                Categor√≠as
              </button>
              <button id="btnMostrarFormProducto" class="btn btn--primary">
                + A√±adir producto
              </button>
            </div>
          </header>

          <!-- Filtros -->
          <section class="card card--filters">
            <div class="filters-row" style="grid-template-columns: minmax(0,1.2fr) minmax(0,0.9fr) minmax(0,0.9fr) auto;">
              <div class="field-group">
                <label for="filtroBusquedaProducto">Buscar producto</label>
                <input
                  type="text"
                  id="filtroBusquedaProducto"
                  placeholder="Ej: Pique, Coca, Hamburguesa‚Ä¶"
                />
              </div>

              <div class="field-group">
                <label for="filtroCategoriaProducto">Categor√≠a</label>
                <select id="filtroCategoriaProducto"></select>
              </div>

              <div class="field-group">
                <label for="filtroEstadoProducto">Disponibilidad</label>
                <select id="filtroEstadoProducto">
                  <option value="todos">Todos</option>
                  <option value="disponibles">Disponibles</option>
                  <option value="no-disponibles">No disponibles</option>
                </select>
              </div>

              <div class="filters-actions">
                <button id="btnResetFiltrosProducto" class="btn btn--ghost">
                  Limpiar
                </button>
              </div>
            </div>
          </section>

          <!-- Formulario Producto -->
          <section id="productoFormSection" class="card card--form hidden">
            <div class="card-header-row">
              <h3 id="productoFormTitulo">Nuevo producto</h3>
            </div>

            <form id="productoForm" class="mesa-form">
              <div class="mesa-form-grid" style="grid-template-columns: repeat(4, minmax(0, 1fr));">
                <!-- Fila 1 -->
                <div class="field-group">
                  <label for="prodNombre">Nombre</label>
                  <input type="text" id="prodNombre" required placeholder="Ej: Pique Macho" />
                </div>

                <div class="field-group">
                  <label for="prodPrecio">Precio</label>
                  <input type="number" id="prodPrecio" min="0" step="0.01" required placeholder="0.00" />
                </div>

                <div class="field-group">
                  <label for="prodCategoria">Categor√≠a</label>
                  <select id="prodCategoria"></select>
                </div>

                <div class="field-group">
                  <label>Estado</label>
                  <div style="display:flex;gap:.75rem;align-items:center;">
                    <label class="mini-switch">
                      <input
                        type="checkbox"
                        id="prodDisponible"
                        class="mini-switch-input"
                        checked
                      />
                      <span class="mini-switch-slider"></span>
                    </label>
                    <span class="section-text" style="font-size:.8rem;">Disponible</span>
                  </div>
                </div>

                <!-- Fila 2: descripci√≥n -->
                <div class="field-group" style="grid-column: 1 / 5;">
                  <label for="prodDescripcion">Descripci√≥n</label>
                  <input
                    type="text"
                    id="prodDescripcion"
                    placeholder="Descripci√≥n corta (opcional)"
                  />
                </div>

                <!-- Fila 3: im√°genes -->
                <div class="field-group field-group--full" style="grid-column: 1 / 5;">
                  <label>Im√°genes</label>
                  <div class="product-images">
                    <div class="product-images-header">
                      <span class="product-images-title">Galer√≠a del producto</span>
                      <button
                        type="button"
                        id="prodAddImageBtn"
                        class="btn btn--ghost btn--tiny"
                      >
                        + A√±adir imagen
                      </button>
                      <input
                        type="file"
                        id="prodImagen"
                        accept="image/*"
                        multiple
                        class="product-images-input"
                      />
                    </div>
                    <div id="prodImagesGrid" class="product-images-grid">
                      <div class="product-images-empty">Sin im√°genes</div>
                    </div>
                  </div>
                </div>

                <!-- Fila 4: inventario -->
                <div class="field-group">
                  <label>Inventario</label>
                  <div style="display:flex;align-items:center;gap:.6rem;">
                    <label class="mini-switch">
                      <input type="checkbox" id="prodReqInv" class="mini-switch-input">
                      <span class="mini-switch-slider"></span>
                    </label>
                    <span class="section-text" style="font-size:.8rem;">Requiere inventario</span>
                  </div>
                </div>

                <div class="field-group inv-field hidden">
                  <label for="prodStock">Stock actual</label>
                  <input type="number" id="prodStock" min="0" value="0">
                </div>

                <div class="field-group inv-field hidden">
                  <label for="prodStockMin">Stock m√≠nimo</label>
                  <input type="number" id="prodStockMin" min="0" value="5">
                </div>

                <!-- === OPCIONES DEL PRODUCTO (GRUPOS) === -->
                <div class="field-group" style="grid-column: 1 / 5;">
                  <div class="product-options-block">
                    <div class="product-options-header">
                      <div>
                        <h4 style="margin:0;font-size:0.95rem;">Opciones del producto</h4>
                        <p class="section-text section-text--muted" style="margin-top:0.2rem;font-size:0.8rem;">
                          Configura bases, sabores, endulzantes, extras, etc. (opcional).
                        </p>
                      </div>
                      <div style="display:flex;align-items:center;gap:.5rem;">
                        <span class="section-text" style="font-size:0.8rem;">Usar opciones</span>
                        <label class="mini-switch">
                          <input type="checkbox" id="prodHasOptions" class="mini-switch-input">
                          <span class="mini-switch-slider"></span>
                        </label>
                      </div>
                    </div>

                    <div id="productOptionsContent" class="product-options-content hidden">
                      <!-- LISTA DE GRUPOS -->
                      <div class="product-options-groups">
                        <div class="product-options-groups-header">
                          <span class="section-text" style="font-size:0.85rem;">Grupos de opciones</span>
                          <button
                            type="button"
                            id="btnAddOptionGroup"
                            class="btn btn--ghost btn--tiny"
                          >
                            + A√±adir grupo
                          </button>
                        </div>

                        <div class="table-wrapper table-wrapper--compact">
                          <table class="table table--compact">
                            <thead>
                              <tr>
                                <th>#</th>
                                <th>Grupo</th>
                                <th>Opciones</th>
                                <th>Acciones</th>
                              </tr>
                            </thead>
                            <tbody id="optionGroupsTableBody"></tbody>
                          </table>
                        </div>
                      </div>

                      <!-- EDITOR DE GRUPO -->
                      <div id="optionGroupEditor" class="product-options-editor hidden">
                        <div class="modal-section" style="padding:0;margin-top:1rem;border-top:1px solid #1f2937;padding-top:1rem;">
                          <h4 style="margin:0 0 .5rem;font-size:0.9rem;">Editar grupo</h4>
                          <div class="modal-grid modal-grid--categoria-form">
                            <div class="field-group">
                              <label for="optGroupNombre">Nombre del grupo</label>
                              <input
                                type="text"
                                id="optGroupNombre"
                                placeholder="Ej: Base, Sabor, Endulzante, Tipo de pan"
                              />
                            </div>
                          </div>

                          <div class="field-group" style="margin-top:0.75rem;">
                            <label>Opciones del grupo</label>
                            <div style="display:flex;gap:.5rem;align-items:center;margin-bottom:.5rem;flex-wrap:wrap;">
                              <input
                                type="text"
                                id="optItemNombre"
                                placeholder="Nombre de la opci√≥n (ej: Leche, Frappe, Stevia)"
                                style="flex:1 1 220px;"
                              />
                              <input
                                type="number"
                                id="optItemPrecio"
                                placeholder="Extra Bs (opc.)"
                                min="0"
                                step="0.01"
                                style="width:130px;"
                              />
                              <button
                                type="button"
                                id="btnAddOptItem"
                                class="btn btn--primary btn--tiny"
                              >
                                A√±adir opci√≥n
                              </button>
                            </div>

                            <div class="table-wrapper table-wrapper--compact">
                              <table class="table table--compact">
                                <thead>
                                  <tr>
                                    <th>Opci√≥n</th>
                                    <th style="text-align:right;">Extra</th>
                                    <th></th>
                                  </tr>
                                </thead>
                                <tbody id="optItemsTableBody"></tbody>
                              </table>
                            </div>
                          </div>

                          <div style="display:flex;justify-content:flex-end;gap:.5rem;margin-top:.75rem;">
                            <button
                              type="button"
                              id="btnCancelarGrupo"
                              class="btn btn--ghost btn--small"
                            >
                              Cancelar
                            </button>
                            <button
                              type="button"
                              id="btnGuardarGrupo"
                              class="btn btn--primary btn--small"
                            >
                              Guardar grupo
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- === RECETA DEL PRODUCTO === -->
                <div class="field-group" style="grid-column: 1 / 5;">
                  <div class="product-options-block">
                    <div class="product-options-header">
                      <div>
                        <h4 style="margin:0;font-size:0.95rem;">Receta del producto</h4>
                        <p class="section-text section-text--muted" style="margin-top:0.2rem;font-size:0.8rem;">
                          Define los ingredientes necesarios para preparar este producto (opcional).
                        </p>
                      </div>
                      <div style="display:flex;align-items:center;gap:.5rem;">
                        <span class="section-text" style="font-size:0.8rem;">Tiene receta</span>
                        <label class="mini-switch">
                          <input type="checkbox" id="prodHasReceta" class="mini-switch-input">
                          <span class="mini-switch-slider"></span>
                        </label>
                      </div>
                    </div>

                    <div id="productRecetaContent" class="product-options-content hidden">
                      <div class="product-options-groups">
                        <div class="product-options-groups-header">
                          <span class="section-text" style="font-size:0.85rem;">Ingredientes</span>
                          <button
                            type="button"
                            id="btnAddIngrediente"
                            class="btn btn--ghost btn--tiny"
                          >
                            + A√±adir ingrediente
                          </button>
                        </div>

                        <div class="table-wrapper table-wrapper--compact">
                          <table class="table table--compact">
                            <thead>
                              <tr>
                                <th>#</th>
                                <th>Insumo</th>
                                <th style="text-align:right;">Cantidad</th>
                                <th>Unidad</th>
                                <th>Acciones</th>
                              </tr>
                            </thead>
                            <tbody id="recetaTableBody">
                              <tr>
                                <td colspan="5" class="empty-cell">
                                  Sin ingredientes. M√≥dulo en desarrollo.
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="mesa-form-actions">
                <button type="button" id="productoCancelar" class="btn btn--ghost">
                  Cancelar
                </button>
                <button type="submit" id="productoGuardar" class="btn btn--primary">
                  Guardar producto
                </button>
              </div>
            </form>
          </section>

          <!-- Layout: tabla + alertas de stock -->
          <section class="layout-productos-grid">
            <!-- LISTA -->
            <article class="card card--productos">
              <div class="card-header-row">
                <h3>Listado de productos</h3>
              </div>
              <div class="table-wrapper">
                <table class="table">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Imagen</th>
                      <th>Producto</th>
                      <th>Categor√≠a</th>
                      <th style="text-align:right;">Precio</th>
                      <th>Inv.</th>
                      <th>Disp.</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody id="productosTableBody"></tbody>
                </table>
              </div>
            </article>

            <!-- ALERTAS -->
            <aside class="card card--stock">
              <div class="card-header-row">
                <div>
                  <h3>Alertas de stock</h3>
                  <p class="card-subtitle">
                    Productos con stock igual o por debajo del m√≠nimo.
                  </p>
                </div>
              </div>
              <ul id="stockAlertList" class="stock-alert-list"></ul>
            </aside>
          </section>
        </section>

        <!-- ===== USUARIOS ===== -->
        <section class="page-section" data-section="usuarios">
          <header class="page-header">
            <div>
              <h2>Usuarios</h2>
              <p>Gesti√≥n de cuentas para mozos, cajeros y administradores.</p>
            </div>
            <div class="mapa-controls">
              <button id="btnNuevoUsuario" class="btn btn--primary">
                + Nuevo usuario
              </button>
            </div>
          </header>

          <section class="card card--filters">
            <div class="filters-row" style="grid-template-columns: repeat(3, minmax(0, 1fr));">
              <div class="field-group">
                <label for="filtroUsuarioTexto">Buscar</label>
                <input
                  type="text"
                  id="filtroUsuarioTexto"
                  placeholder="Nombre, usuario, rol..."
                />
              </div>
              <div class="field-group">
                <label for="filtroUsuarioRol">Rol</label>
                <select id="filtroUsuarioRol">
                  <option value="todos">Todos</option>
                  <option value="admin">Administrador</option>
                  <option value="cajero">Cajero</option>
                  <option value="mozo">Mozo</option>
                </select>
              </div>
              <div class="filters-actions">
                <button id="btnResetFiltrosUsuario" class="btn btn--ghost">
                  Limpiar
                </button>
              </div>
            </div>
          </section>

          <section class="card">
            <div class="card-header-row">
              <h3>Listado de usuarios</h3>
            </div>
            <div class="table-wrapper">
              <table class="table">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Nombre</th>
                    <th>Usuario</th>
                    <th>Rol</th>
                    <th>Acceso</th>
                    <th>√Åreas</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="usuariosTableBody"></tbody>
              </table>
            </div>
          </section>

          <section id="usuarioFormSection" class="card card--form hidden">
            <div class="card-header-row">
              <h3 id="usuarioFormTitulo">Nuevo usuario</h3>
            </div>

            <form id="usuarioForm" class="mesa-form">
              <div class="mesa-form-grid" style="grid-template-columns: repeat(3, minmax(0, 1fr));">
                <div class="field-group">
                  <label for="usrNombre">Nombre completo</label>
                  <input id="usrNombre" type="text" required />
                </div>
                <div class="field-group">
                  <label for="usrRol">Rol</label>
                  <select id="usrRol">
                    <option value="admin">Administrador</option>
                    <option value="cajero">Cajero</option>
                    <option value="mesero">Mesero</option>
                    <option value="cocinero">Cocinero</option>
                  </select>
                </div>
                <div class="field-group">
                  <label for="usrActivo">Estado</label>
                  <select id="usrActivo">
                    <option value="true">Activo</option>
                    <option value="false">Inactivo</option>
                  </select>
                </div>

                <!-- Bloque Password (solo admin) -->
                <div class="field-group hidden" id="bloqueLoginPassword">
                  <label for="usrUsuario">Usuario (solo admin)</label>
                  <input id="usrUsuario" type="text" />
                </div>

                <!-- Bloque PIN (cajero) -->
                <div class="field-group hidden" id="bloqueLoginPin" style="grid-column: span 2;">
                  <label for="usrPin">PIN para cajero</label>
                  <div style="display: flex; gap: 0.5rem; align-items: flex-end;">
                    <input id="usrPin" type="number" placeholder="Ej: 1234" style="flex: 1;" />
                    <button type="button" id="btnGenerarPin" class="btn btn--ghost btn--xs">
                      Generar PIN
                    </button>
                  </div>
                </div>

                <!-- Bloque QR (mesero/cocinero) -->
                <div class="field-group hidden" id="bloqueLoginQr" style="grid-column: span 2;">
                  <label for="usrQrToken">QR para acceso</label>
                  <div style="display: flex; gap: 0.5rem; align-items: flex-end;">
                    <input id="usrQrToken" type="text" readonly style="flex: 1; background: rgba(255,255,255,0.05);" />
                    <button type="button" id="btnGenerarQr" class="btn btn--ghost btn--xs">
                      Generar QR
                    </button>
                  </div>
                  <small style="opacity: 0.7; font-size: 0.75rem; margin-top: 0.25rem; display: block;">
                    Este c√≥digo se usa para generar el QR del mesero/cocinero.
                  </small>
                </div>

                <!-- √Åreas permitidas -->
                <div class="field-group" style="grid-column: 1 / -1;">
                  <label for="usrAreas">√Åreas permitidas</label>
                  <input
                    id="usrAreas"
                    type="text"
                    readonly
                    style="background: rgba(255,255,255,0.05);"
                    placeholder="Se llena autom√°ticamente seg√∫n el rol"
                  />
                  <small style="opacity: 0.7; font-size: 0.75rem; margin-top: 0.25rem; display: block;">
                    Se llena autom√°ticamente seg√∫n el rol. Puedes ajustarlo manualmente si es necesario.
                  </small>
                </div>

                <div class="field-group" style="grid-column: 1 / -1;">
                  <label for="usrNota">Nota / comentario</label>
                  <input
                    id="usrNota"
                    type="text"
                    placeholder="Ej: turno noche, responsable de caja..."
                  />
                </div>
              </div>

              <div class="mesa-form-actions">
                <button type="button" id="usuarioCancelar" class="btn btn--ghost">
                  Cancelar
                </button>
                <button type="submit" class="btn btn--primary">
                  Guardar usuario
                </button>
              </div>
            </form>
          </section>
        </section>

        <!-- ===== INVENTARIO ===== -->
        <section class="page-section" data-section="inventario">
          <header class="page-header">
            <div>
              <h2>Inventario</h2>
              <p>Gesti√≥n de insumos, categor√≠as y control de stock.</p>
            </div>
            <div class="mapa-controls">
              <button id="btnInsumoCategorias" class="btn btn--ghost">
                Categor√≠as
              </button>
              <button id="btnMostrarFormInsumo" class="btn btn--primary">
                + A√±adir insumo
              </button>
            </div>
          </header>

          <!-- Filtros -->
          <section class="card card--filters">
            <div class="filters-row" style="grid-template-columns: minmax(0,1.5fr) minmax(0,1fr) auto;">
              <div class="field-group">
                <label for="filtroBusquedaInsumo">Buscar insumo</label>
                <input
                  type="text"
                  id="filtroBusquedaInsumo"
                  placeholder="Ej: Harina, Tomate, Aceite..."
                />
              </div>

              <div class="field-group">
                <label for="filtroCategoriaInsumo">Categor√≠a</label>
                <select id="filtroCategoriaInsumo"></select>
              </div>

              <div class="filters-actions">
                <button id="btnResetFiltrosInsumo" class="btn btn--ghost">
                  Limpiar
                </button>
              </div>
            </div>
          </section>

          <!-- Formulario insumo -->
          <section id="insumoFormSection" class="card card--form hidden">
            <div class="card-header-row">
              <h3 id="insumoFormTitulo">Nuevo insumo</h3>
            </div>

            <form id="insumoForm" class="mesa-form">
              <div class="mesa-form-grid" style="grid-template-columns: repeat(4, minmax(0, 1fr));">
                <div class="field-group">
                  <label for="insumoNombre">Nombre</label>
                  <input
                    type="text"
                    id="insumoNombre"
                    required
                    placeholder="Ej: Harina de trigo"
                  />
                </div>

                <div class="field-group">
                  <label for="insumoCategoria">Categor√≠a</label>
                  <select id="insumoCategoria"></select>
                </div>

                <div class="field-group">
                  <label for="insumoUnidad">Unidad</label>
                  <select id="insumoUnidad">
                    <option value="unidades">Unidades</option>
                    <option value="kg">Kg</option>
                    <option value="g">g</option>
                    <option value="l">L</option>
                    <option value="ml">ml</option>
                  </select>
                </div>

                <div class="field-group">
                  <label for="insumoNota">Nota (opcional)</label>
                  <input
                    type="text"
                    id="insumoNota"
                    placeholder="Ej: Para masas, proveedor X"
                  />
                </div>

                <div class="field-group">
                  <label for="insumoStock">Stock actual</label>
                  <input
                    type="number"
                    id="insumoStock"
                    min="0"
                    value="0"
                  />
                </div>

                <div class="field-group">
                  <label for="insumoStockMin">Stock m√≠nimo</label>
                  <input
                    type="number"
                    id="insumoStockMin"
                    min="0"
                    value="5"
                  />
                </div>
              </div>

              <div class="mesa-form-actions">
                <button type="button" id="insumoCancelar" class="btn btn--ghost">
                  Cancelar
                </button>
                <button type="submit" id="insumoGuardar" class="btn btn--primary">
                  Guardar insumo
                </button>
              </div>
            </form>
          </section>

          <!-- Layout: tabla + alertas -->
          <section class="layout-productos-grid">
            <article class="card card--productos">
              <div class="card-header-row">
                <h3>Listado de insumos</h3>
              </div>
              <div class="table-wrapper">
                <table class="table">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Insumo</th>
                      <th>Categor√≠a</th>
                      <th>Unidad</th>
                      <th style="text-align:right;">Stock</th>
                      <th style="text-align:right;">Stock m√≠n.</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody id="insumosTableBody"></tbody>
                </table>
              </div>
            </article>

            <aside class="card card--stock">
              <div class="card-header-row">
                <div>
                  <h3>Alertas de stock</h3>
                  <p class="card-subtitle">
                    Insumos con stock igual o por debajo del m√≠nimo.
                  </p>
                </div>
              </div>
              <ul id="insumoStockAlertList" class="stock-alert-list"></ul>
            </aside>
          </section>
        </section>

        <!-- ===== RESERVAS ===== -->
        <section class="page-section" data-section="reservas">
          <header class="page-header">
            <div>
              <h2>Reservas</h2>
              <p>Gesti√≥n de reservas por fecha, hora y mesa.</p>
            </div>
            <div class="mapa-controls">
              <button id="btnNuevaReserva" class="btn btn--primary">
                + Nueva reserva
              </button>
            </div>
          </header>

          <!-- Filtros -->
          <section class="card card--filters">
            <div class="filters-row" style="grid-template-columns: repeat(4, minmax(0, 1fr));">
              <div class="field-group">
                <label for="filtroReservaFecha">Fecha</label>
                <div class="inline-date-controls">
                  <input type="date" id="filtroReservaFecha" />
                  <div class="quick-date-buttons">
                    <button type="button" id="btnFechaAyer" class="btn btn--ghost btn--xs">Ayer</button>
                    <button type="button" id="btnFechaHoy" class="btn btn--ghost btn--xs">Hoy</button>
                    <button type="button" id="btnFechaManana" class="btn btn--ghost btn--xs">Ma√±ana</button>
                    <button type="button" id="btnCalendarioReserva" class="btn btn--ghost btn--xs">
                      Calendario üìÖ
                    </button>
                  </div>
                </div>
              </div>
              <div class="field-group">
                <label for="filtroReservaEstado">Estado</label>
                <select id="filtroReservaEstado">
                  <option value="todas">Todas</option>
                  <option value="pendiente">Pendiente</option>
                  <option value="confirmada">Confirmada</option>
                  <option value="completada">Completada</option>
                  <option value="cancelada">Cancelada</option>
                </select>
              </div>
              <div class="field-group">
                <label for="filtroReservaTexto">Buscar</label>
                <input
                  type="text"
                  id="filtroReservaTexto"
                  placeholder="Cliente, mesa, tel√©fono..."
                />
              </div>
              <div class="filters-actions">
                <button id="btnResetFiltrosReserva" class="btn btn--ghost">
                  Limpiar
                </button>
              </div>
            </div>
          </section>

          <!-- Layout: tabla + resumen -->
          <section class="layout-productos-grid">
            <article class="card">
              <div class="card-header-row">
                <h3>Listado de reservas</h3>
              </div>
              <div class="table-wrapper">
                <table class="table">
                  <thead>
                    <tr>
                      <th>#</th>
                      <th>Cliente</th>
                      <th>Personas</th>
                      <th>Fecha</th>
                      <th>Hora</th>
                      <th>Mesa / Grupo</th>
                      <th>Estado</th>
                      <th>Acciones</th>
                    </tr>
                  </thead>
                  <tbody id="reservasTableBody"></tbody>
                </table>
              </div>
            </article>

            <aside class="card">
              <div class="card-header-row">
                <div>
                  <h3>Resumen del d√≠a</h3>
                  <p class="card-subtitle">
                    Reservas para la fecha seleccionada.
                  </p>
                </div>
              </div>
              <ul id="reservasResumenList" class="stock-alert-list"></ul>
            </aside>
          </section>

          <!-- Formulario / modal simple de reserva -->
          <section id="reservaFormSection" class="card card--form hidden">
            <div class="card-header-row">
              <h3 id="reservaFormTitulo">Nueva reserva</h3>
            </div>

            <form id="reservaForm" class="mesa-form">
              <div class="mesa-form-grid" style="grid-template-columns: repeat(4, minmax(0, 1fr));">
                <div class="field-group">
                  <label for="resCliente">Cliente</label>
                  <input id="resCliente" type="text" required placeholder="Nombre del cliente" />
                </div>
                <div class="field-group">
                  <label for="resTelefono">Tel√©fono</label>
                  <input id="resTelefono" type="text" placeholder="Ej: 77712345" />
                </div>
                <div class="field-group">
                  <label for="resEmail">Email</label>
                  <input
                    id="resEmail"
                    type="email"
                    placeholder="correo@ejemplo.com"
                  />
                </div>
                <div class="field-group">
                  <label for="resPersonas">Personas</label>
                  <input id="resPersonas" type="number" min="1" value="2" />
                </div>
                <div class="field-group">
                  <label for="resFecha">Fecha</label>
                  <input id="resFecha" type="date" required />
                </div>
                <div class="field-group">
                  <label for="resHora">Hora</label>
                  <input id="resHora" type="time" required />
                </div>
                <div class="field-group">
                  <label for="resMesa">Mesa / Grupo</label>
                  <input
                    id="resMesa"
                    type="text"
                    placeholder="Ej: Mesa 4, Grupo terraza"
                  />
                </div>
                <div class="field-group">
                  <label for="resEstado">Estado</label>
                  <select id="resEstado">
                    <option value="pendiente">Pendiente</option>
                    <option value="confirmada">Confirmada</option>
                    <option value="completada">Completada</option>
                    <option value="cancelada">Cancelada</option>
                  </select>
                </div>
                <div class="field-group" style="grid-column: 1 / -1;">
                  <label for="resNota">Nota (opcional)</label>
                  <input
                    id="resNota"
                    type="text"
                    placeholder="Ej: Aniversario, pedido especial..."
                  />
                </div>
              </div>

              <div class="mesa-form-actions">
                <button type="button" id="reservaCancelar" class="btn btn--ghost">
                  Cancelar
                </button>
                <button type="submit" class="btn btn--primary">
                  Guardar reserva
                </button>
              </div>
            </form>
          </section>
        </section>

        <!-- ===== REPORTES ===== -->
<section class="page-section" data-section="reportes">
  <header class="page-header">
    <div>
      <h2>Reportes</h2>
      <p>Historial de d√≠as y detalle de ventas por d√≠a (demo).</p>
    </div>
  </header>

  <section class="card">
    <div class="card-header-row">
      <h3>D√≠as con movimientos (demo)</h3>

      <div class="report-modo-toggle">
        <button type="button" id="repModoDia" class="rep-modo-btn">
          D√≠a
        </button>
        <button type="button" id="repModoMes" class="rep-modo-btn">
          Mes
        </button>
        <button type="button" id="repModoAnio" class="rep-modo-btn">
          A√±o
        </button>
      </div>
    </div>

    <div class="card-body report-master-grid">
      <!-- COLUMNA IZQUIERDA: LISTA DE D√çAS -->
      <div class="report-days-panel">
        <ul id="repFechasLista" class="activity-list"></ul>
      </div>

      <!-- COLUMNA DERECHA: DETALLE DEL D√çA -->
      <div class="report-detail-panel" id="repDetalleCard">
        <div class="report-detail-header">
          <h3 class="report-section-title">Detalle del d√≠a</h3>
          <span
            id="repDetalleFechaLabel"
            class="report-detail-date-label"
          >
            Selecciona un d√≠a de la lista.
          </span>
        </div>

        <div class="report-detail">
          <!-- GR√ÅFICO POR HORA -->
          <div class="report-main-chart">
            <h4 class="report-section-title">Gr√°fico por hora (demo)</h4>
            <canvas
              id="repGraficoHoraCanvas"
              class="chart-canvas"
            ></canvas>
          </div>

          <!-- FILA: DATOS + TOP PRODUCTOS -->
          <div class="report-detail-grid">
            <article class="report-box">
              <h4 class="report-section-title">Datos de caja</h4>
              <dl class="report-data-list">
                <div>
                  <dt>Caja al abrir</dt>
                  <dd id="repCajaInicio">‚Äî</dd>
                </div>
                <div>
                  <dt>Caja al cerrar</dt>
                  <dd id="repCajaCierre">‚Äî</dd>
                </div>
                <div>
                  <dt>Diferencia</dt>
                  <dd id="repCajaDiferencia">‚Äî</dd>
                </div>
                <div>
                  <dt>Ventas del d√≠a</dt>
                  <dd id="repVentasDia">‚Äî</dd>
                </div>
                <div>
                  <dt>Tickets del d√≠a</dt>
                  <dd id="repTicketsDia">‚Äî</dd>
                </div>
              </dl>
            </article>

            <article class="report-box">
              <h4 class="report-section-title">Top productos (top 10)</h4>
              <ul
                id="repTopProductosLista"
                class="activity-list"
              ></ul>
            </article>
          </div>

          <!-- LISTA COMPLETA DE PRODUCTOS DEL D√çA -->
          <article class="report-box" style="margin-top:1.5rem;">
            <h4 class="report-section-title">
              Lista de productos vendidos
            </h4>
            <ul
              id="repProductosDetalleLista"
              class="activity-list"
            ></ul>
          </article>
        </div>
      </div>
    </div>
  </section>
</section>

        <!-- ===== CONFIGURACI√ìN ===== -->
<section class="page-section" data-section="configuracion">
  <header class="page-header">
    <div>
      <h2>Configuraci√≥n</h2>
      <p>Preferencias generales del restaurante (demo local).</p>
    </div>
  </header>

  <section class="card card--form">
    <div class="card-header-row">
      <h3>Configuraci√≥n general del restaurante</h3>
    </div>

    <form id="configForm" class="mesa-form">
      <!-- IDENTIDAD -->
      <div class="config-group">
        <h4 class="config-group-title">Identidad del restaurante</h4>
        <div class="mesa-form-grid" style="grid-template-columns: repeat(3, minmax(0, 1fr));">
          <div class="field-group">
            <label for="cfgNombre">Nombre del restaurante</label>
            <input
              id="cfgNombre"
              type="text"
              placeholder="Karady Admin ¬∑ Restaurante"
            />
          </div>

          <div class="field-group">
            <label for="cfgLema">Lema / descripci√≥n corta</label>
            <input
              id="cfgLema"
              type="text"
              placeholder="Cocina r√°pida, servicio preciso."
            />
          </div>

          <div class="field-group">
            <label for="cfgLogo">Logo (demo)</label>
            <input id="cfgLogo" type="file" accept="image/*" />
            <p style="opacity:.7;font-size:.8rem;margin-top:.25rem;">
              Solo referencia visual, a√∫n no se guarda en servidor.
            </p>
          </div>
        </div>
      </div>

      <!-- DATOS GENERALES -->
      <div class="config-group">
        <h4 class="config-group-title">Datos generales</h4>
        <div class="mesa-form-grid" style="grid-template-columns: repeat(3, minmax(0, 1fr));">
          <div class="field-group">
            <label for="cfgMoneda">Moneda</label>
            <select id="cfgMoneda">
              <option value="BOB">BOB ¬∑ Bolivianos</option>
              <option value="USD">USD ¬∑ D√≥lares</option>
            </select>
          </div>

          <div class="field-group">
            <label for="cfgZonaHoraria">Zona horaria</label>
            <input
              id="cfgZonaHoraria"
              type="text"
              placeholder="America/La_Paz"
            />
          </div>

          <div class="field-group">
            <label for="cfgIdioma">Idioma (demo)</label>
            <select id="cfgIdioma">
              <option value="es-BO">Espa√±ol (Bolivia)</option>
              <option value="es-ES">Espa√±ol (Espa√±a)</option>
              <option value="en-US">Ingl√©s (US)</option>
            </select>
          </div>
        </div>
      </div>

      <!-- OPERACI√ìN DEL LOCAL -->
      <div class="config-group">
        <h4 class="config-group-title">Operaci√≥n del local</h4>
        <div class="mesa-form-grid" style="grid-template-columns: repeat(3, minmax(0, 1fr));">
          <div class="field-group" style="grid-column: 1 / -1;">
            <label>D√≠as de apertura</label>
            <div class="config-days">
              <label class="config-day-pill">
                <input type="checkbox" name="cfgDias" value="lun" /> Lun
              </label>
              <label class="config-day-pill">
                <input type="checkbox" name="cfgDias" value="mar" /> Mar
              </label>
              <label class="config-day-pill">
                <input type="checkbox" name="cfgDias" value="mie" /> Mi√©
              </label>
              <label class="config-day-pill">
                <input type="checkbox" name="cfgDias" value="jue" /> Jue
              </label>
              <label class="config-day-pill">
                <input type="checkbox" name="cfgDias" value="vie" /> Vie
              </label>
              <label class="config-day-pill">
                <input type="checkbox" name="cfgDias" value="sab" /> S√°b
              </label>
              <label class="config-day-pill">
                <input type="checkbox" name="cfgDias" value="dom" /> Dom
              </label>
            </div>
          </div>

          <div class="field-group">
            <label>Horario del local</label>
            <div class="inline-date-controls">
              <input id="cfgHoraApertura" type="time" />
              <span style="opacity:.7;font-size:.8rem;">a</span>
              <input id="cfgHoraCierre" type="time" />
            </div>
          </div>

          <div class="field-group">
            <label for="cfgReservaMaxMinutos">
              Tiempo m√°ximo de reserva (min)
            </label>
            <input
              id="cfgReservaMaxMinutos"
              type="number"
              min="0"
              step="5"
              placeholder="120"
            />
          </div>

          <div class="field-group">
            <label for="cfgReservaToleranciaMinutos">
              Tolerancia de llegada (min)
            </label>
            <input
              id="cfgReservaToleranciaMinutos"
              type="number"
              min="0"
              step="5"
              placeholder="15"
            />
          </div>
        </div>
      </div>

      <!-- FACTURACI√ìN / TICKET -->
      <div class="config-group">
        <h4 class="config-group-title">Facturaci√≥n y ticket</h4>
        <div class="mesa-form-grid" style="grid-template-columns: repeat(3, minmax(0, 1fr));">
          <div class="field-group">
            <label for="cfgImpuesto">Impuesto (%)</label>
            <input
              id="cfgImpuesto"
              type="number"
              min="0"
              max="100"
              step="0.01"
              placeholder="13"
            />
          </div>

          <div class="field-group">
            <label for="cfgPropina">Propina sugerida (%)</label>
            <input
              id="cfgPropina"
              type="number"
              min="0"
              max="100"
              step="0.01"
              placeholder="0"
            />
          </div>

          <div class="field-group">
            <label for="cfgNit">NIT / Nro. documento</label>
            <input
              id="cfgNit"
              type="text"
              placeholder="123456/789"
            />
          </div>

          <div class="field-group" style="grid-column: 1 / -1;">
            <label for="cfgTicketFooter">Texto en ticket / factura</label>
            <textarea
              id="cfgTicketFooter"
              rows="3"
              placeholder="Gracias por su visita."
            ></textarea>
          </div>
        </div>
      </div>

      <!-- INTERFAZ -->
      <div class="config-group">
        <h4 class="config-group-title">Interfaz (solo demo)</h4>
        <div class="mesa-form-grid" style="grid-template-columns: repeat(3, minmax(0, 1fr));">
          <div class="field-group">
            <label for="cfgTema">Tema</label>
            <select id="cfgTema">
              <option value="dark-green">Oscuro ¬∑ Verde</option>
              <option value="dark-orange">Oscuro ¬∑ Naranja</option>
              <option value="dark-blue">Oscuro ¬∑ Azul</option>
              <option value="dark-purple">Oscuro ¬∑ Morado</option>
              <option value="dark-cyan">Oscuro ¬∑ Cian</option>
            </select>
            <p style="opacity:.7;font-size:.8rem;margin-top:.25rem;">
              Todos los temas son base oscura, solo cambia el color de acento.
            </p>
          </div>
        </div>
      </div>

      <!-- BOT√ìN GUARDAR -->
      <div class="mesa-form-actions">
        <button type="submit" class="btn btn--primary">
          Guardar configuraci√≥n (demo)
        </button>
      </div>
    </form>
  </section>
</section>
      </section>
    </main>
  </div>

  <!-- MODAL DETALLE MESA -->
  <div id="mesaModal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-dialog">
      <header class="modal-header">
        <div>
          <p class="modal-subtitle">Detalle de la mesa</p>
          <h2 id="mesaModalTituloMesa">Mesa X</h2>
        </div>
        <button class="modal-close" data-close-modal>&times;</button>
      </header>

      <section class="modal-body">
        <div class="modal-section">
          <h3>Informaci√≥n de la mesa</h3>
          <div class="modal-grid">
            <div class="field-group">
              <label>N√∫mero / Nombre</label>
              <input type="text" id="mesaModalNumero" disabled />
            </div>
            <div class="field-group">
              <label for="mesaModalZona">Zona</label>
              <select id="mesaModalZona"></select>
            </div>
            <div class="field-group">
              <label for="mesaModalCapacidad">Capacidad</label>
              <input type="number" id="mesaModalCapacidad" min="1" />
            </div>
            <div class="field-group">
              <label>Estado</label>
              <span id="mesaModalEstadoBadge" class="badge badge--libre">
                Libre
              </span>
            </div>
          </div>
        </div>

        <div class="modal-section">
          <h3>Estado r√°pido</h3>
          <div class="estado-chips">
            <button class="estado-chip" data-estado="Libre">Libre</button>
            <button class="estado-chip" data-estado="Ocupada">Ocupada</button>
            <button class="estado-chip" data-estado="Reservada">
              Reservada
            </button>
          </div>
          <p class="modal-hint">
            Las mesas desactivadas no aparecen en el mapa.
          </p>
        </div>
      </section>

      <footer class="modal-footer">
        <button id="mesaModalEliminar" class="btn btn--danger">
          Eliminar mesa
        </button>
        <button id="mesaModalGuardar" class="btn btn--primary">
          Guardar cambios
        </button>
      </footer>
    </div>
  </div>

  <!-- MODAL CATEGOR√çAS (√öNICO) -->
  <div id="categoriasModal" class="modal hidden">
    <div class="modal-backdrop" id="categoriasModalBackdrop"></div>
    <div class="modal-dialog">
      <header class="modal-header">
        <div>
          <p class="modal-subtitle">Cat√°logo</p>
          <h2>Categor√≠as de productos</h2>
        </div>
        <button class="modal-close" id="categoriasModalCerrar">&times;</button>
      </header>

      <section class="modal-body">
        <!-- Formulario arriba -->
        <div class="modal-section">
          <h3>Nueva categor√≠a</h3>
          <div class="modal-grid modal-grid--categoria-form">
            <div class="field-group">
              <label for="catNombreInput">Nombre</label>
              <input
                type="text"
                id="catNombreInput"
                placeholder="Ej: Desayunos"
              />
            </div>
            <div class="field-group">
              <label class="invisible-label">Acci√≥n</label>
              <div class="categorias-form-actions">
                <button id="catGuardarBtn" class="btn btn--primary btn--small">
                  A√±adir
                </button>
                <button
                  id="catCancelarEdicionBtn"
                  class="btn btn--ghost btn--small hidden"
                >
                  Cancelar
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Listado abajo -->
        <div class="modal-section">
          <h3>Listado de categor√≠as</h3>
          <p class="section-text section-text--muted">
            Se usan para agrupar los productos en el men√∫.
          </p>
          <div class="table-wrapper">
            <table class="table table--compact">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Categor√≠a</th>
                  <th>Productos</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="categoriasTableBody"></tbody>
            </table>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- MODAL CATEGOR√çAS DE INSUMOS -->
  <div id="insumoCategoriasModal" class="modal hidden">
    <div class="modal-backdrop" id="insumoCategoriasModalBackdrop"></div>
    <div class="modal-dialog">
      <header class="modal-header">
        <div>
          <p class="modal-subtitle">Inventario</p>
          <h2>Categor√≠as de insumos</h2>
        </div>
        <button class="modal-close" id="insumoCategoriasModalCerrar">&times;</button>
      </header>

      <section class="modal-body">
        <div class="modal-section">
          <h3>Nueva categor√≠a de insumo</h3>
          <div class="modal-grid modal-grid--categoria-form">
            <div class="field-group">
              <label for="insumoCatNombreInput">Nombre</label>
              <input
                type="text"
                id="insumoCatNombreInput"
                placeholder="Ej: Alimentos secos"
              />
            </div>
            <div class="field-group">
              <label class="invisible-label">Acci√≥n</label>
              <div class="categorias-form-actions">
                <button id="insumoCatGuardarBtn" class="btn btn--primary btn--small">
                  A√±adir
                </button>
                <button
                  id="insumoCatCancelarEdicionBtn"
                  class="btn btn--ghost btn--small hidden"
                >
                  Cancelar
                </button>
              </div>
            </div>
          </div>
        </div>

        <div class="modal-section">
          <h3>Listado de categor√≠as</h3>
          <p class="section-text section-text--muted">
            Se usan para clasificar los insumos del inventario.
          </p>
          <div class="table-wrapper">
            <table class="table table--compact">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Categor√≠a</th>
                  <th>Insumos</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody id="insumoCategoriasTableBody"></tbody>
            </table>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- ===== MODAL CALENDARIO RESERVAS ===== -->
  <div id="calendarioModal" class="modal hidden">
    <div class="modal-backdrop" id="calendarioBackdrop"></div>

    <div class="modal-dialog calendar-dialog">
      <header class="modal-header">
        <h2>Seleccionar fecha</h2>
        <button class="modal-close" id="calendarioCerrar">&times;</button>
      </header>

      <section class="modal-body">
        <div class="calendar-header">
          <button type="button" id="calPrevMes" class="btn btn--ghost btn--xs">‚Äπ</button>
          <div class="calendar-header-title" id="calTituloMes">
            <!-- Noviembre 2025 -->
          </div>
          <button type="button" id="calNextMes" class="btn btn--ghost btn--xs">‚Ä∫</button>
        </div>

        <div class="calendar-weekdays">
          <span>L</span><span>M</span><span>X</span><span>J</span><span>V</span><span>S</span><span>D</span>
        </div>

        <div id="calendarioGrid" class="calendar-grid"></div>

        <p class="calendar-legend">
          ‚Ä¢ El n√∫mero indica cu√°ntas reservas hay ese d√≠a.
          ‚Ä¢ Haz clic en un d√≠a para ver sus reservas.
        </p>
      </section>
    </div>
  </div>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="{% static 'js/adminux/main.js' %}"></script>
</body>
</html>
