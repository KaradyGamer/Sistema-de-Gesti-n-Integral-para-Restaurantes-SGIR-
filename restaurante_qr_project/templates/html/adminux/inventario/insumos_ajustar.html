{% extends 'html/adminux/base_form.html' %}
{% load static %}

{% block title %}{{ title }} - AdminUX{% endblock %}

{% block form_title %}{{ title }}{% endblock %}

{% block form_content %}
<div class="alert alert-info mb-4">
    <h5>Insumo: {{ insumo.nombre }}</h5>
    <p class="mb-0">
        <strong>Stock actual:</strong> {{ insumo.stock_actual }} {{ insumo.get_unidad_display }}<br>
        <strong>Stock mínimo:</strong> {{ insumo.stock_minimo }} {{ insumo.get_unidad_display }}
    </p>
</div>

<form method="post" class="needs-validation" novalidate>
    {% csrf_token %}

    <div class="mb-3">
        <label for="{{ form.cantidad_nueva.id_for_label }}" class="form-label">
            {{ form.cantidad_nueva.label }} <span class="text-danger">*</span>
        </label>
        {{ form.cantidad_nueva }}
        <small class="form-text text-muted d-block">
            Ingresa la nueva cantidad total que debe tener el insumo (no la diferencia).
        </small>
        {% if form.cantidad_nueva.errors %}
            <div class="invalid-feedback d-block">{{ form.cantidad_nueva.errors }}</div>
        {% endif %}
    </div>

    <div class="mb-3">
        <label for="{{ form.motivo.id_for_label }}" class="form-label">
            {{ form.motivo.label }} <span class="text-danger">*</span>
        </label>
        {{ form.motivo }}
        <small class="form-text text-muted d-block">
            Explica el motivo del ajuste (ej: "Inventario físico", "Merma", "Corrección de error").
        </small>
        {% if form.motivo.errors %}
            <div class="invalid-feedback d-block">{{ form.motivo.errors }}</div>
        {% endif %}
    </div>

    <div class="d-flex gap-2 justify-content-end">
        <a href="{% url back_url %}" class="btn btn-secondary">
            <i class="bi bi-x-circle"></i> Cancelar
        </a>
        <button type="submit" class="btn btn-warning">
            <i class="bi bi-arrow-left-right"></i> Ajustar Stock
        </button>
    </div>
</form>
{% endblock %}
