// ========================================
// SGIR v38.3 - UI Minimal JavaScript
// Auto-wrap tables + simple toggles
// ========================================

(function() {
    'use strict';

    /**
     * Envuelve todas las tablas en .table-responsive
     */
    function wrapTables() {
        document.querySelectorAll('table').forEach(table => {
            if (!table.closest('.table-responsive')) {
                const wrapper = document.createElement('div');
                wrapper.className = 'table-responsive';
                table.parentNode.insertBefore(wrapper, table);
                wrapper.appendChild(table);
            }
        });
    }

    /**
     * Inicializa componentes UI
     */
    function init() {
        wrapTables();

        // Observar cambios en el DOM para tablas dinámicas
        const observer = new MutationObserver(mutations => {
            mutations.forEach(mutation => {
                if (mutation.addedNodes.length) {
                    mutation.addedNodes.forEach(node => {
                        if (node.nodeType === 1) {
                            if (node.tagName === 'TABLE' || node.querySelector && node.querySelector('table')) {
                                wrapTables();
                            }
                        }
                    });
                }
            });
        });

        observer.observe(document.body, {
            childList: true,
            subtree: true
        });
    }

    // Ejecutar cuando el DOM esté listo
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
    } else {
        init();
    }

})();
